import{s as bt,n as rt,r as ft,b as ut,o as _t}from"../chunks/scheduler.BvLojk_z.js";import{S as mt,i as yt,e as p,s as L,w as dt,c as f,o as H,b as q,l as D,d as y,f as o,j as Q,g as i,q as O,p as V,x as gt,r as et,u as Ct,k as st,m as nt,v as ct,n as at}from"../chunks/index.BUGUDjDu.js";import{e as vt}from"../chunks/each.D6YF6ztN.js";import{s as K,i as kt}from"../chunks/stores.DqOuW_qB.js";function ht(e,t,c){const u=e.slice();return u[14]=t[c],u[15]=t,u[16]=c,u}function Tt(e){let t,c="A bevásárlólista üres.";return{c(){t=p("p"),t.textContent=c},l(u){t=f(u,"P",{"data-svelte-h":!0}),H(t)!=="svelte-j6mf5"&&(t.textContent=c)},m(u,_){Q(u,t,_)},p:rt,d(u){u&&y(t)}}}function Et(e){let t,c,u='<tr><th scope="col" class="svelte-1vbbda2">Tétel neve</th> <th scope="col" class="svelte-1vbbda2">Mennyiség</th> <th scope="col" class="svelte-1vbbda2">Mértékegység</th> <th scope="col" class="svelte-1vbbda2">Készlet helye</th> <th scope="col" class="svelte-1vbbda2">Akciók</th></tr>',_,v,g=vt(e[1]),n=[];for(let l=0;l<g.length;l+=1)n[l]=pt(ht(e,g,l));return{c(){t=p("table"),c=p("thead"),c.innerHTML=u,_=L(),v=p("tbody");for(let l=0;l<n.length;l+=1)n[l].c();this.h()},l(l){t=f(l,"TABLE",{class:!0});var h=D(t);c=f(h,"THEAD",{"data-svelte-h":!0}),H(c)!=="svelte-1pckibj"&&(c.innerHTML=u),_=q(h),v=f(h,"TBODY",{});var a=D(v);for(let E=0;E<n.length;E+=1)n[E].l(a);a.forEach(y),h.forEach(y),this.h()},h(){o(t,"class","table table-bordered svelte-1vbbda2")},m(l,h){Q(l,t,h),i(t,c),i(t,_),i(t,v);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(v,null)},p(l,h){if(h&50){g=vt(l[1]);let a;for(a=0;a<g.length;a+=1){const E=ht(l,g,a);n[a]?n[a].p(E,h):(n[a]=pt(E),n[a].c(),n[a].m(v,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=g.length}},d(l){l&&y(t),Ct(n,l)}}}function pt(e){let t,c,u=(e[14].item||"N/A")+"",_,v,g,n,l,h,a=(e[14].unit||"N/A")+"",E,U,C,S=(e[14].store||"N/A")+"",N,r,T,m,s="Törlés",$,I,w;function J(){e[9].call(n,e[16])}function R(){return e[10](e[16])}function A(){return e[11](e[16])}return{c(){t=p("tr"),c=p("td"),_=st(u),v=L(),g=p("td"),n=p("input"),l=L(),h=p("td"),E=st(a),U=L(),C=p("td"),N=st(S),r=L(),T=p("td"),m=p("button"),m.textContent=s,$=L(),this.h()},l(z){t=f(z,"TR",{});var b=D(t);c=f(b,"TD",{class:!0});var Y=D(c);_=nt(Y,u),Y.forEach(y),v=q(b),g=f(b,"TD",{class:!0});var j=D(g);n=f(j,"INPUT",{type:!0,min:!0,style:!0}),l=q(j),j.forEach(y),h=f(b,"TD",{class:!0});var B=D(h);E=nt(B,a),B.forEach(y),U=q(b),C=f(b,"TD",{class:!0});var G=D(C);N=nt(G,S),G.forEach(y),r=q(b),T=f(b,"TD",{class:!0});var x=D(T);m=f(x,"BUTTON",{class:!0,"data-svelte-h":!0}),H(m)!=="svelte-1869ca9"&&(m.textContent=s),x.forEach(y),$=q(b),b.forEach(y),this.h()},h(){o(c,"class","svelte-1vbbda2"),o(n,"type","number"),o(n,"min","1"),ct(n,"width","60 px"),ct(n,"text-align","center"),o(g,"class","svelte-1vbbda2"),o(h,"class","svelte-1vbbda2"),o(C,"class","svelte-1vbbda2"),o(m,"class","btn btn-danger btn-sm svelte-1vbbda2"),o(T,"class","svelte-1vbbda2")},m(z,b){Q(z,t,b),i(t,c),i(c,_),i(t,v),i(t,g),i(g,n),O(n,e[1][e[16]].desiredQuantity),i(g,l),i(t,h),i(h,E),i(t,U),i(t,C),i(C,N),i(t,r),i(t,T),i(T,m),i(t,$),I||(w=[V(n,"input",J),V(n,"change",R),V(m,"click",A)],I=!0)},p(z,b){e=z,b&2&&u!==(u=(e[14].item||"N/A")+"")&&at(_,u),b&2&&et(n.value)!==e[1][e[16]].desiredQuantity&&O(n,e[1][e[16]].desiredQuantity),b&2&&a!==(a=(e[14].unit||"N/A")+"")&&at(E,a),b&2&&S!==(S=(e[14].store||"N/A")+"")&&at(N,S)},d(z){z&&y(t),I=!1,ft(w)}}}function Lt(e){let t,c="Bevásárlólista",u,_,v,g="Új tétel hozzáadása",n,l,h,a,E="Tétel neve",U,C,S,N,r,T="Mennyiség",m,s,$,I,w,J="Mértékegység",R,A,z,b,Y="Hozzáadás",j,B,G="Frissítés",x,F,lt,it;function ot(d,k){return d[1].length>0?Et:Tt}let W=ot(e),M=W(e);return{c(){t=p("h1"),t.textContent=c,u=L(),_=p("div"),v=p("h2"),v.textContent=g,n=L(),l=p("form"),h=p("div"),a=p("label"),a.textContent=E,U=L(),C=p("input"),S=L(),N=p("div"),r=p("label"),r.textContent=T,m=L(),s=p("input"),$=L(),I=p("div"),w=p("label"),w.textContent=J,R=L(),A=p("input"),z=L(),b=p("button"),b.textContent=Y,j=L(),B=p("button"),B.textContent=G,x=L(),M.c(),F=dt(),this.h()},l(d){t=f(d,"H1",{"data-svelte-h":!0}),H(t)!=="svelte-1sukcvi"&&(t.textContent=c),u=q(d),_=f(d,"DIV",{class:!0});var k=D(_);v=f(k,"H2",{"data-svelte-h":!0}),H(v)!=="svelte-l8dz56"&&(v.textContent=g),n=q(k),l=f(k,"FORM",{});var P=D(l);h=f(P,"DIV",{class:!0});var X=D(h);a=f(X,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),H(a)!=="svelte-1tm2re5"&&(a.textContent=E),U=q(X),C=f(X,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),X.forEach(y),S=q(P),N=f(P,"DIV",{class:!0});var Z=D(N);r=f(Z,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),H(r)!=="svelte-18j6uc4"&&(r.textContent=T),m=q(Z),s=f(Z,"INPUT",{id:!0,type:!0,min:!0,placeholder:!0,class:!0}),Z.forEach(y),$=q(P),I=f(P,"DIV",{class:!0});var tt=D(I);w=f(tt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),H(w)!=="svelte-1av1js8"&&(w.textContent=J),R=q(tt),A=f(tt,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),tt.forEach(y),z=q(P),b=f(P,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),H(b)!=="svelte-11no928"&&(b.textContent=Y),P.forEach(y),k.forEach(y),j=q(d),B=f(d,"BUTTON",{class:!0,"data-svelte-h":!0}),H(B)!=="svelte-yrs4g0"&&(B.textContent=G),x=q(d),M.l(d),F=dt(),this.h()},h(){o(a,"for","item"),o(a,"class","svelte-1vbbda2"),o(C,"id","item"),o(C,"type","text"),o(C,"placeholder",""),C.required=!0,o(C,"class","svelte-1vbbda2"),o(h,"class","form-group svelte-1vbbda2"),o(r,"for","quantity"),o(r,"class","svelte-1vbbda2"),o(s,"id","quantity"),o(s,"type","number"),o(s,"min","1"),o(s,"placeholder",""),s.required=!0,o(s,"class","svelte-1vbbda2"),o(N,"class","form-group svelte-1vbbda2"),o(w,"for","unit"),o(w,"class","svelte-1vbbda2"),o(A,"id","unit"),o(A,"type","text"),o(A,"placeholder",""),A.required=!0,o(A,"class","svelte-1vbbda2"),o(I,"class","form-group svelte-1vbbda2"),o(b,"type","submit"),o(b,"class","btn btn-primary svelte-1vbbda2"),o(_,"class","new-item-form svelte-1vbbda2"),o(B,"class","btn btn-primary mb-3 svelte-1vbbda2")},m(d,k){Q(d,t,k),Q(d,u,k),Q(d,_,k),i(_,v),i(_,n),i(_,l),i(l,h),i(h,a),i(h,U),i(h,C),O(C,e[0].item),i(l,S),i(l,N),i(N,r),i(N,m),i(N,s),O(s,e[0].quantity),i(l,$),i(l,I),i(I,w),i(I,R),i(I,A),O(A,e[0].unit),i(l,z),i(l,b),Q(d,j,k),Q(d,B,k),Q(d,x,k),M.m(d,k),Q(d,F,k),lt||(it=[V(C,"input",e[6]),V(s,"input",e[7]),V(A,"input",e[8]),V(l,"submit",gt(e[3])),V(B,"click",e[2])],lt=!0)},p(d,[k]){k&1&&C.value!==d[0].item&&O(C,d[0].item),k&1&&et(s.value)!==d[0].quantity&&O(s,d[0].quantity),k&1&&A.value!==d[0].unit&&O(A,d[0].unit),W===(W=ot(d))&&M?M.p(d,k):(M.d(1),M=W(d),M&&(M.c(),M.m(F.parentNode,F)))},i:rt,o:rt,d(d){d&&(y(t),y(u),y(_),y(j),y(B),y(x),y(F)),M.d(d),lt=!1,ft(it)}}}function qt(e,t,c){let u,_;ut(e,K,r=>c(1,u=r)),ut(e,kt,r=>c(12,_=r));let v={item:"",quantity:1,desiredQuantity:1,unit:"",store:"Bevásárlólista"};const g=()=>{console.log("updateShoppingList függvény fut!");try{const r=_||{cleaning:[],foods:[],household:[]};console.log("Aktuális inventoryData:",r);const T=new Set(u.map(s=>`${s.item}-${s.unit}-${s.store}`)),m=[...u,...(r.cleaning||[]).filter(s=>s.quantity<2).filter(s=>!T.has(`${s.item}-${s.unit}-${s.store}`)),...(r.foods||[]).filter(s=>s.quantity<2).filter(s=>!T.has(`${s.item}-${s.unit}-${s.store}`)),...(r.household||[]).filter(s=>s.quantity<2).filter(s=>!T.has(`${s.item}-${s.unit}-${s.store}`))];console.log("Szűrt bevásárlólista:",m),K.set(m)}catch(r){console.error("Hiba a bevásárlólista frissítésekor:",r),alert("Hiba történt a bevásárlólista frissítése során.")}},n=()=>{if(!v.item||!v.unit){alert("Kérlek töltsd ki az összes mezőt!");return}K.update(r=>[...r,{...v}]),c(0,v={item:"",quantity:1,unit:"",store:"Bevásárlólista"})},l=r=>{K.update(T=>{const m=[...T];return m.splice(r,1),m})},h=r=>{K.update(T=>{const m=[...T];return m[r]&&(m[r].desiredQuantity=Math.max(1,m[r].desiredQuantity||1)),m})};_t(()=>{g()}),typeof window<"u"&&(window.updateShoppingList=g);function a(){v.item=this.value,c(0,v)}function E(){v.quantity=et(this.value),c(0,v)}function U(){v.unit=this.value,c(0,v)}function C(r){u[r].desiredQuantity=et(this.value),K.set(u)}return[v,u,g,n,l,h,a,E,U,C,r=>h(r),r=>l(r)]}class Bt extends mt{constructor(t){super(),yt(this,t,qt,Lt,bt,{})}}export{Bt as component};
