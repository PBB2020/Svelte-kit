import{s as bt,n as dt,r as yt,b as ft,o as Ct}from"../chunks/scheduler.BvLojk_z.js";import{S as Tt,i as kt,e as h,s as E,w as vt,c as p,o as Q,b as U,l as w,d as m,f as n,j as F,g as a,q as N,p as A,x as Lt,r as ut,u as Et,k as Ut,m as qt,v as Z,n as xt}from"../chunks/index.BUGUDjDu.js";import{e as _t}from"../chunks/each.D6YF6ztN.js";import{s as V,i as Dt}from"../chunks/stores.DqOuW_qB.js";function gt(t,e,f){const u=t.slice();return u[21]=e[f],u[22]=e,u[23]=f,u}function It(t){let e,f="A bevásárlólista üres.";return{c(){e=h("p"),e.textContent=f},l(u){e=p(u,"P",{"data-svelte-h":!0}),Q(e)!=="svelte-j6mf5"&&(e.textContent=f)},m(u,y){F(u,e,y)},p:dt,d(u){u&&m(e)}}}function Bt(t){let e,f,u='<tr><th scope="col" class="svelte-hgadx4">Tétel neve</th> <th scope="col" class="svelte-hgadx4">Mennyiség</th> <th scope="col" class="svelte-hgadx4">Mértékegység</th> <th scope="col" class="svelte-hgadx4">Bolt</th> <th scope="col" class="svelte-hgadx4">Akciók</th></tr>',y,c,C=_t(t[1]),i=[];for(let r=0;r<C.length;r+=1)i[r]=mt(gt(t,C,r));return{c(){e=h("table"),f=h("thead"),f.innerHTML=u,y=E(),c=h("tbody");for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){e=p(r,"TABLE",{class:!0});var v=w(e);f=p(v,"THEAD",{"data-svelte-h":!0}),Q(f)!=="svelte-lv48f"&&(f.innerHTML=u),y=U(v),c=p(v,"TBODY",{});var s=w(c);for(let D=0;D<i.length;D+=1)i[D].l(s);s.forEach(m),v.forEach(m),this.h()},h(){n(e,"class","table table-bordered svelte-hgadx4")},m(r,v){F(r,e,v),a(e,f),a(e,y),a(e,c);for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(c,null)},p(r,v){if(v&242){C=_t(r[1]);let s;for(s=0;s<C.length;s+=1){const D=gt(r,C,s);i[s]?i[s].p(D,v):(i[s]=mt(D),i[s].c(),i[s].m(c,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=C.length}},d(r){r&&m(e),Et(i,r)}}}function mt(t){let e,f,u=(t[21].item||"N/A")+"",y,c,C,i,r,v,s,D,S,_,R,q,k,G="Törlés",$,L,Y;function z(){t[12].call(i,t[23])}function M(){return t[13](t[23])}function l(){t[14].call(s,t[23])}function x(){return t[15](t[23])}function o(){t[16].call(_,t[23])}function g(){return t[17](t[23])}function j(){return t[18](t[23])}return{c(){e=h("tr"),f=h("td"),y=Ut(u),c=E(),C=h("td"),i=h("input"),r=E(),v=h("td"),s=h("input"),D=E(),S=h("td"),_=h("input"),R=E(),q=h("td"),k=h("button"),k.textContent=G,$=E(),this.h()},l(I){e=p(I,"TR",{});var b=w(e);f=p(b,"TD",{class:!0});var J=w(f);y=qt(J,u),J.forEach(m),c=U(b),C=p(b,"TD",{class:!0});var B=w(C);i=p(B,"INPUT",{type:!0,min:!0,style:!0}),B.forEach(m),r=U(b),v=p(b,"TD",{class:!0});var W=w(v);s=p(W,"INPUT",{type:!0,style:!0}),W.forEach(m),D=U(b),S=p(b,"TD",{class:!0});var P=w(S);_=p(P,"INPUT",{type:!0,style:!0}),P.forEach(m),R=U(b),q=p(b,"TD",{class:!0});var tt=w(q);k=p(tt,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(k)!=="svelte-1869ca9"&&(k.textContent=G),tt.forEach(m),$=U(b),b.forEach(m),this.h()},h(){n(f,"class","svelte-hgadx4"),n(i,"type","number"),n(i,"min","1"),Z(i,"width","60 px"),Z(i,"text-align","center"),n(C,"class","svelte-hgadx4"),n(s,"type","text"),Z(s,"width","100 px"),Z(s,"text-align","center"),n(v,"class","svelte-hgadx4"),n(_,"type","text"),Z(_,"width","150 px"),Z(_,"text-align","center"),n(S,"class","svelte-hgadx4"),n(k,"class","btn btn-danger btn-sm svelte-hgadx4"),n(q,"class","svelte-hgadx4")},m(I,b){F(I,e,b),a(e,f),a(f,y),a(e,c),a(e,C),a(C,i),N(i,t[1][t[23]].desiredQuantity),a(e,r),a(e,v),a(v,s),N(s,t[1][t[23]].desiredUnit),a(e,D),a(e,S),a(S,_),N(_,t[1][t[23]].shop),a(e,R),a(e,q),a(q,k),a(e,$),L||(Y=[A(i,"input",z),A(i,"change",M),A(s,"input",l),A(s,"change",x),A(_,"input",o),A(_,"change",g),A(k,"click",j)],L=!0)},p(I,b){t=I,b&2&&u!==(u=(t[21].item||"N/A")+"")&&xt(y,u),b&2&&ut(i.value)!==t[1][t[23]].desiredQuantity&&N(i,t[1][t[23]].desiredQuantity),b&2&&s.value!==t[1][t[23]].desiredUnit&&N(s,t[1][t[23]].desiredUnit),b&2&&_.value!==t[1][t[23]].shop&&N(_,t[1][t[23]].shop)},d(I){I&&m(e),L=!1,yt(Y)}}}function Nt(t){let e,f="Bevásárlólista",u,y,c,C="Új tétel hozzáadása",i,r,v,s,D="Tétel neve",S,_,R,q,k,G="Mennyiség",$,L,Y,z,M,l="Mértékegység",x,o,g,j,I,b="Bolt",J,B,W,P,tt="Hozzáadás",et,K,ht="Frissítés",st,X,ot,pt;function ct(d,T){return d[1].length>0?Bt:It}let lt=ct(t),H=lt(t);return{c(){e=h("h1"),e.textContent=f,u=E(),y=h("div"),c=h("h2"),c.textContent=C,i=E(),r=h("form"),v=h("div"),s=h("label"),s.textContent=D,S=E(),_=h("input"),R=E(),q=h("div"),k=h("label"),k.textContent=G,$=E(),L=h("input"),Y=E(),z=h("div"),M=h("label"),M.textContent=l,x=E(),o=h("input"),g=E(),j=h("div"),I=h("label"),I.textContent=b,J=E(),B=h("input"),W=E(),P=h("button"),P.textContent=tt,et=E(),K=h("button"),K.textContent=ht,st=E(),H.c(),X=vt(),this.h()},l(d){e=p(d,"H1",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1sukcvi"&&(e.textContent=f),u=U(d),y=p(d,"DIV",{class:!0});var T=w(y);c=p(T,"H2",{"data-svelte-h":!0}),Q(c)!=="svelte-l8dz56"&&(c.textContent=C),i=U(T),r=p(T,"FORM",{});var O=w(r);v=p(O,"DIV",{class:!0});var nt=w(v);s=p(nt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Q(s)!=="svelte-1tm2re5"&&(s.textContent=D),S=U(nt),_=p(nt,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),nt.forEach(m),R=U(O),q=p(O,"DIV",{class:!0});var at=w(q);k=p(at,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Q(k)!=="svelte-18j6uc4"&&(k.textContent=G),$=U(at),L=p(at,"INPUT",{id:!0,type:!0,min:!0,placeholder:!0,class:!0}),at.forEach(m),Y=U(O),z=p(O,"DIV",{class:!0});var rt=w(z);M=p(rt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Q(M)!=="svelte-1av1js8"&&(M.textContent=l),x=U(rt),o=p(rt,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),rt.forEach(m),g=U(O),j=p(O,"DIV",{class:!0});var it=w(j);I=p(it,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Q(I)!=="svelte-1ff3661"&&(I.textContent=b),J=U(it),B=p(it,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),it.forEach(m),W=U(O),P=p(O,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Q(P)!=="svelte-11no928"&&(P.textContent=tt),O.forEach(m),T.forEach(m),et=U(d),K=p(d,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(K)!=="svelte-yrs4g0"&&(K.textContent=ht),st=U(d),H.l(d),X=vt(),this.h()},h(){n(e,"class","svelte-hgadx4"),n(s,"for","item"),n(s,"class","svelte-hgadx4"),n(_,"id","item"),n(_,"type","text"),n(_,"placeholder",""),_.required=!0,n(_,"class","svelte-hgadx4"),n(v,"class","form-group svelte-hgadx4"),n(k,"for","quantity"),n(k,"class","svelte-hgadx4"),n(L,"id","quantity"),n(L,"type","number"),n(L,"min","1"),n(L,"placeholder",""),L.required=!0,n(L,"class","svelte-hgadx4"),n(q,"class","form-group svelte-hgadx4"),n(M,"for","unit"),n(M,"class","svelte-hgadx4"),n(o,"id","unit"),n(o,"type","text"),n(o,"placeholder",""),o.required=!0,n(o,"class","svelte-hgadx4"),n(z,"class","form-group svelte-hgadx4"),n(I,"for","shop"),n(I,"class","svelte-hgadx4"),n(B,"id","shop"),n(B,"type","text"),n(B,"placeholder",""),B.required=!0,n(B,"class","svelte-hgadx4"),n(j,"class","form-group svelte-hgadx4"),n(P,"type","submit"),n(P,"class","btn btn-primary svelte-hgadx4"),n(y,"class","new-item-form svelte-hgadx4"),n(K,"class","btn btn-primary mb-3 svelte-hgadx4")},m(d,T){F(d,e,T),F(d,u,T),F(d,y,T),a(y,c),a(y,i),a(y,r),a(r,v),a(v,s),a(v,S),a(v,_),N(_,t[0].item),a(r,R),a(r,q),a(q,k),a(q,$),a(q,L),N(L,t[0].quantity),a(r,Y),a(r,z),a(z,M),a(z,x),a(z,o),N(o,t[0].unit),a(r,g),a(r,j),a(j,I),a(j,J),a(j,B),N(B,t[0].shop),a(r,W),a(r,P),F(d,et,T),F(d,K,T),F(d,st,T),H.m(d,T),F(d,X,T),ot||(pt=[A(_,"input",t[8]),A(L,"input",t[9]),A(o,"input",t[10]),A(B,"input",t[11]),A(r,"submit",Lt(t[3])),A(K,"click",t[2])],ot=!0)},p(d,[T]){T&1&&_.value!==d[0].item&&N(_,d[0].item),T&1&&ut(L.value)!==d[0].quantity&&N(L,d[0].quantity),T&1&&o.value!==d[0].unit&&N(o,d[0].unit),T&1&&B.value!==d[0].shop&&N(B,d[0].shop),lt===(lt=ct(d))&&H?H.p(d,T):(H.d(1),H=lt(d),H&&(H.c(),H.m(X.parentNode,X)))},i:dt,o:dt,d(d){d&&(m(e),m(u),m(y),m(et),m(K),m(st),m(X)),H.d(d),ot=!1,yt(pt)}}}function wt(t,e,f){let u,y;ft(t,V,l=>f(1,u=l)),ft(t,Dt,l=>f(19,y=l));let c={item:"",quantity:1,desiredQuantity:1,unit:"",desiredUnit:"",shop:"",store:"Bevásárlólista"};const C=()=>{console.log("updateShoppingList függvény fut!");try{const l=y||{cleaning:[],foods:[],household:[]};console.log("Aktuális inventoryData:",l);const x=new Set(u.map(g=>`${g.item}-${g.unit}-${g.store}`)),o=[...u,...(l.cleaning||[]).filter(g=>g.quantity<2).filter(g=>!x.has(`${g.item}-${g.unit}-${g.store}`)),...(l.foods||[]).filter(g=>g.quantity<2).filter(g=>!x.has(`${g.item}-${g.unit}-${g.store}`)),...(l.household||[]).filter(g=>g.quantity<2).filter(g=>!x.has(`${g.item}-${g.unit}-${g.store}`))];console.log("Szűrt bevásárlólista:",o),V.set(o)}catch(l){console.error("Hiba a bevásárlólista frissítésekor:",l),alert("Hiba történt a bevásárlólista frissítése során.")}},i=()=>{if(!c.item||!c.unit){alert("Kérlek töltsd ki az összes mezőt!");return}V.update(l=>[...l,{...c}]),f(0,c={item:"",quantity:1,unit:"",store:"Bevásárlólista"})},r=l=>{V.update(x=>{const o=[...x];return o.splice(l,1),o})},v=l=>{V.update(x=>{const o=[...x];return o[l]&&(o[l].desiredQuantity=Math.max(1,o[l].desiredQuantity||1)),o})},s=l=>{V.update(x=>{const o=[...x];return o[l]&&(o[l].desiredUnit=o[l].desiredUnit||""),o})},D=l=>{V.update(x=>{const o=[...x];return o[l]&&(o[l].shop=o[l].shop||""),o})};Ct(()=>{C()}),typeof window<"u"&&(window.updateShoppingList=C);function S(){c.item=this.value,f(0,c)}function _(){c.quantity=ut(this.value),f(0,c)}function R(){c.unit=this.value,f(0,c)}function q(){c.shop=this.value,f(0,c)}function k(l){u[l].desiredQuantity=ut(this.value),V.set(u)}const G=l=>v(l);function $(l){u[l].desiredUnit=this.value,V.set(u)}const L=l=>s(l);function Y(l){u[l].shop=this.value,V.set(u)}return[c,u,C,i,r,v,s,D,S,_,R,q,k,G,$,L,Y,l=>D(l),l=>r(l)]}class Pt extends Tt{constructor(e){super(),kt(this,e,wt,Nt,bt,{})}}export{Pt as component};
